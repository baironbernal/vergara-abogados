import{c as k,r as m,j as e,C as w,a as C,L as _,i as I}from"./app-BgnqzQAw.js";import{S as D}from"./SEOHead-BQUaghdP.js";import{C as $,H as O}from"./house-RffRak9P.js";import{U as F}from"./user-DgmvgPbb.js";import{A as E}from"./arrow-left-CeHNjgqu.js";import{C as N,a as y}from"./chevron-right-B_x7kJmE.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],z=k("maximize",G);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],S=k("x",M);function P({property:s,isOpen:v,onClose:c}){const[t,x]=m.useState({name:"",email:"",phone:"",visit_date:"",visit_time:"",observations:""}),[h,g]=m.useState(!1),[b,f]=m.useState(!1),[a,i]=m.useState({});if(!v)return null;const o=r=>{const{name:l,value:d}=r.target;x(u=>({...u,[l]:d})),a[l]&&i(u=>({...u,[l]:null}))},p=()=>{const r={};return t.name.trim()||(r.name="El nombre es requerido"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(r.email="Email inválido"):r.email="El email es requerido",t.phone.trim()||(r.phone="El teléfono es requerido"),t.visit_date||(r.visit_date="La fecha es requerida"),t.visit_time||(r.visit_time="La hora es requerida"),new Date(t.visit_date+"T"+t.visit_time)<new Date&&(r.visit_date="La fecha y hora deben ser futuras"),i(r),Object.keys(r).length===0},j=async r=>{if(r.preventDefault(),!!p()){g(!0);try{const l=await fetch("/api/visits",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({...t,property_id:s.id})}),d=await l.json();l.ok?(f(!0),setTimeout(()=>{f(!1),x({name:"",email:"",phone:"",visit_date:"",visit_time:"",observations:""}),c()},3e3)):d.errors?i(d.errors):i({general:d.message||"Error al procesar la solicitud"})}catch{i({general:"Error de conexión. Intente nuevamente."})}finally{g(!1)}}};if(b)return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:c}),e.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-6 bg-green-100 rounded-full",children:e.jsx($,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"mb-4 text-2xl font-medium text-darki font-prata",children:"¡Visita Agendada!"}),e.jsx("p",{className:"mb-6 text-lg text-greyki font-dmsans",children:"Nos contactaremos contigo pronto para confirmar los detalles."}),e.jsxs("div",{className:"p-4 text-left border bg-softGrey/20 border-softGrey rounded",children:[e.jsx("h3",{className:"mb-3 font-medium text-darki font-dmsans",children:"Detalles de tu visita:"}),e.jsxs("div",{className:"space-y-2 text-sm text-greyki font-dmsans",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Propiedad:"})," ",s.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha:"})," ",new Date(t.visit_date).toLocaleDateString("es-CO")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hora:"})," ",t.visit_time]})]})]})]})]});const n=new Date().toISOString().split("T")[0];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:c}),e.jsxs("div",{className:"relative z-10 w-full max-w-2xl max-h-[90vh] mx-4 bg-white shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-softGrey",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-darki font-prata",children:"Agendar Visita"}),e.jsx("p",{className:"text-greyki font-dmsans",children:s.name})]}),e.jsx("button",{onClick:c,className:"p-2 transition-colors duration-200 text-greyki hover:text-darki hover:bg-softGrey rounded",children:e.jsx(S,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.general&&e.jsx("div",{className:"p-4 text-red-600 bg-red-50 border border-red-200 rounded",children:a.general}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-darki font-dmsans flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-golden"}),"Información Personal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Nombre completo *"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${a.name?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`,placeholder:"Tu nombre completo"}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Teléfono *"}),e.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:o,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${a.phone?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`,placeholder:"+57 300 123 4567"}),a.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.phone})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Correo electrónico *"}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:o,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${a.email?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`,placeholder:"tu@email.com"}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-darki font-dmsans flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-golden"}),"Información de la Visita"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Fecha preferida *"}),e.jsx("input",{type:"date",name:"visit_date",value:t.visit_date,onChange:o,min:n,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${a.visit_date?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`}),a.visit_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.visit_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Hora preferida *"}),e.jsx("input",{type:"time",name:"visit_time",value:t.visit_time,onChange:o,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${a.visit_time?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`}),a.visit_time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.visit_time})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Observaciones adicionales"}),e.jsx("textarea",{name:"observations",value:t.observations,onChange:o,rows:3,className:"w-full px-4 py-3 border border-graykiSecondary transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden resize-none",placeholder:"¿Hay algo específico que te gustaría saber sobre la propiedad?"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-softGrey",children:[e.jsx("button",{type:"button",onClick:c,className:"flex-1 px-6 py-3 border border-graykiSecondary text-greyki hover:bg-softGrey transition-colors duration-300 font-medium font-dmsans",children:"Cancelar"}),e.jsx(C,{type:"submit",disabled:h,className:`flex-1 py-3 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Enviando...":"Agendar Visita"})]})]})})]})]})}function R({property:s,auth:v,seo:c}){const[t,x]=m.useState(0),[h,g]=m.useState(!1),[b,f]=m.useState(!1),a=n=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),i=[s.thumbnail_url||"/placeholder.svg",...s.gallery_images||[]],o=()=>{x(n=>(n+1)%i.length)},p=()=>{x(n=>(n-1+i.length)%i.length)},j=n=>{const l="+573115327297".replace(/[\+\s\-\(\)]/g,""),d=encodeURIComponent(n),u=`https://wa.me/${l}?text=${d}`;window.open(u,"_blank")};return e.jsxs(e.Fragment,{children:[e.jsx(D,{seo:c}),e.jsxs("div",{className:"min-h-screen bg-whiteki",children:[e.jsx("div",{className:"px-4 py-4 mx-auto max-w-7xl",children:e.jsxs(_,{href:"/inmobiliaria",className:"inline-flex items-center transition-colors duration-200 text-greyki hover:text-golden font-dmsans",children:[e.jsx(E,{className:"w-4 h-4 mr-2 lg:w-5 lg:h-5"}),"Volver a Propiedades"]})}),e.jsx("div",{className:"px-4 py-6 mx-auto max-w-7xl lg:py-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2 lg:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:i[t],alt:s.name,className:"w-full h-64 object-cover border border-softGrey cursor-pointer sm:h-80 lg:h-[500px]",onClick:()=>g(!0)}),e.jsxs("button",{onClick:()=>g(!0),className:"absolute flex items-center gap-2 px-2 py-1 text-xs transition-colors duration-200 top-3 right-3 bg-darki text-whiteki font-dmsans hover:bg-golden lg:top-4 lg:right-4 lg:px-3 lg:py-2 lg:text-sm",children:[e.jsx(z,{className:"w-3 h-3 lg:w-4 lg:h-4"}),"Ver Galería"]}),i.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"absolute p-1 transition-colors duration-200 transform -translate-y-1/2 left-2 top-1/2 bg-darki/80 text-whiteki hover:bg-golden lg:left-4 lg:p-2",children:e.jsx(N,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),e.jsx("button",{onClick:o,className:"absolute p-1 transition-colors duration-200 transform -translate-y-1/2 right-2 top-1/2 bg-darki/80 text-whiteki hover:bg-golden lg:right-4 lg:p-2",children:e.jsx(y,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]}),i.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:i.map((n,r)=>e.jsx("img",{src:n,alt:`${s.name} - ${r+1}`,className:`w-full h-16 object-cover cursor-pointer border-2 transition-all duration-200 sm:h-20 lg:h-20 ${t===r?"border-golden":"border-softGrey hover:border-golden"}`,onClick:()=>x(r)},r))})]}),e.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-golden text-whiteki font-dmsans w-fit",children:s.type}),e.jsx("span",{className:"text-2xl font-bold text-golden font-prata sm:text-3xl",children:a(s.price)})]}),e.jsx("h1",{className:"mb-3 text-2xl font-medium text-darki font-prata sm:text-3xl lg:text-4xl",children:s.name}),e.jsxs("div",{className:"flex items-center mb-4 text-greyki lg:mb-6",children:[e.jsx(I,{className:"w-4 h-4 mr-2 text-golden lg:w-5 lg:h-5"}),e.jsxs("span",{className:"text-sm font-dmsans lg:text-base",children:[s.municipality?.name,", ",s.state?.name||"Colombia"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4 border-y border-softGrey sm:gap-6 sm:py-6",children:[s.size&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(O,{className:"w-5 h-5 text-golden lg:w-6 lg:h-6"})}),e.jsx("div",{className:"text-xl font-bold text-darki font-prata lg:text-2xl",children:s.size}),e.jsx("div",{className:"text-xs text-greyki font-dmsans lg:text-sm",children:"m² construidos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(w,{className:"w-5 h-5 text-golden lg:w-6 lg:h-6"})}),e.jsx("div",{className:"text-xl font-bold text-darki font-prata lg:text-2xl",children:"Disponible"}),e.jsx("div",{className:"text-xs text-greyki font-dmsans lg:text-sm",children:"Para visita"})]})]}),s.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-medium text-darki font-dmsans lg:mb-4 lg:text-xl",children:"Descripción"}),e.jsx("p",{className:"text-sm leading-relaxed text-greyki font-dmsans lg:text-base",children:s.description})]}),e.jsxs("div",{className:"pt-4 space-y-4 border-t border-softGrey lg:pt-6",children:[e.jsx(C,{onClick:()=>f(!0),className:"w-full py-3 text-base lg:py-4 lg:text-lg",children:"Agendar Visita"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsx("button",{onClick:()=>j(`¡Hola! Me interesa obtener más información sobre la propiedad "${s.name}" (${a(s.price)}). ¿Podrían ayudarme con más detalles?`),className:"px-4 py-2 font-medium transition-all duration-300 border border-golden text-golden hover:bg-golden hover:text-whiteki font-dmsans text-sm lg:px-6 lg:py-3 lg:text-base",children:"Solicitar Información"}),e.jsx("button",{onClick:()=>j(`¡Hola! Me interesa contactar con un asesor para la propiedad "${s.name}" (${a(s.price)}). ¿Podrían ayudarme?`),className:"px-4 py-2 font-medium transition-all duration-300 border border-darki text-darki hover:bg-darki hover:text-whiteki font-dmsans text-sm lg:px-6 lg:py-3 lg:text-base",children:"Contactar Asesor"})]})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:e.jsxs("div",{className:"relative flex items-center justify-center w-full h-full p-4",children:[e.jsx("button",{onClick:()=>g(!1),className:"absolute z-10 p-2 transition-colors duration-200 top-4 right-4 bg-darki text-whiteki hover:bg-golden lg:top-6 lg:right-6 lg:p-3",children:e.jsx(S,{className:"w-5 h-5 lg:w-6 lg:h-6"})}),e.jsx("img",{src:i[t],alt:s.name,className:"max-w-full max-h-full object-contain"}),i.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"absolute p-2 transition-colors duration-200 left-4 top-1/2 transform -translate-y-1/2 bg-darki/80 text-whiteki hover:bg-golden lg:left-8 lg:p-3",children:e.jsx(N,{className:"w-6 h-6 lg:w-8 lg:h-8"})}),e.jsx("button",{onClick:o,className:"absolute p-2 transition-colors duration-200 right-4 top-1/2 transform -translate-y-1/2 bg-darki/80 text-whiteki hover:bg-golden lg:right-8 lg:p-3",children:e.jsx(y,{className:"w-6 h-6 lg:w-8 lg:h-8"})})]}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 px-4 py-2 text-sm text-white bg-darki/80 rounded-lg lg:bottom-8 lg:text-base",children:[t+1," / ",i.length]})]})}),b&&e.jsx(P,{property:s,isOpen:b,onClose:()=>f(!1)})]})]})}export{R as default};
