import{c as j,r as c,j as e,C as w,a as _,L as C,i as I}from"./app-DerXJYF2.js";import{S as D}from"./SEOHead-Cr-TZVxm.js";import{U as O}from"./user-Ymqg5ZQt.js";import{A as F}from"./arrow-left-DKYoxF03.js";import{C as y,a as k}from"./chevron-right-DQu5QJ4e.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],E=j("circle-check-big",z);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],$=j("house",G);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],V=j("maximize",M);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],S=j("x",A);function L({property:a,isOpen:N,onClose:d}){const[s,m]=c.useState({name:"",email:"",phone:"",visit_date:"",visit_time:"",observations:""}),[f,x]=c.useState(!1),[b,u]=c.useState(!1),[t,i]=c.useState({});if(!N)return null;const l=r=>{const{name:o,value:h}=r.target;m(v=>({...v,[o]:h})),t[o]&&i(v=>({...v,[o]:null}))},p=()=>{const r={};return s.name.trim()||(r.name="El nombre es requerido"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(r.email="Email inválido"):r.email="El email es requerido",s.phone.trim()||(r.phone="El teléfono es requerido"),s.visit_date||(r.visit_date="La fecha es requerida"),s.visit_time||(r.visit_time="La hora es requerida"),new Date(s.visit_date+"T"+s.visit_time)<new Date&&(r.visit_date="La fecha y hora deben ser futuras"),i(r),Object.keys(r).length===0},n=async r=>{if(r.preventDefault(),!!p()){x(!0);try{const o=await fetch("/api/visits",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({...s,property_id:a.id})}),h=await o.json();o.ok?(u(!0),setTimeout(()=>{u(!1),m({name:"",email:"",phone:"",visit_date:"",visit_time:"",observations:""}),d()},3e3)):h.errors?i(h.errors):i({general:h.message||"Error al procesar la solicitud"})}catch{i({general:"Error de conexión. Intente nuevamente."})}finally{x(!1)}}};if(b)return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-6 bg-green-100 rounded-full",children:e.jsx(E,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"mb-4 text-2xl font-medium text-darki font-prata",children:"¡Visita Agendada!"}),e.jsx("p",{className:"mb-6 text-lg text-greyki font-dmsans",children:"Nos contactaremos contigo pronto para confirmar los detalles."}),e.jsxs("div",{className:"p-4 text-left border bg-softGrey/20 border-softGrey rounded",children:[e.jsx("h3",{className:"mb-3 font-medium text-darki font-dmsans",children:"Detalles de tu visita:"}),e.jsxs("div",{className:"space-y-2 text-sm text-greyki font-dmsans",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Propiedad:"})," ",a.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha:"})," ",new Date(s.visit_date).toLocaleDateString("es-CO")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hora:"})," ",s.visit_time]})]})]})]})]});const g=new Date().toISOString().split("T")[0];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative z-10 w-full max-w-2xl max-h-[90vh] mx-4 bg-white shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-softGrey",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-darki font-prata",children:"Agendar Visita"}),e.jsx("p",{className:"text-greyki font-dmsans",children:a.name})]}),e.jsx("button",{onClick:d,className:"p-2 transition-colors duration-200 text-greyki hover:text-darki hover:bg-softGrey rounded",children:e.jsx(S,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[t.general&&e.jsx("div",{className:"p-4 text-red-600 bg-red-50 border border-red-200 rounded",children:t.general}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-darki font-dmsans flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-golden"}),"Información Personal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Nombre completo *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${t.name?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`,placeholder:"Tu nombre completo"}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Teléfono *"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:l,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${t.phone?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`,placeholder:"+57 300 123 4567"}),t.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.phone})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Correo electrónico *"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:l,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${t.email?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`,placeholder:"tu@email.com"}),t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.email})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-darki font-dmsans flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-golden"}),"Información de la Visita"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Fecha preferida *"}),e.jsx("input",{type:"date",name:"visit_date",value:s.visit_date,onChange:l,min:g,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${t.visit_date?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`}),t.visit_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.visit_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Hora preferida *"}),e.jsx("input",{type:"time",name:"visit_time",value:s.visit_time,onChange:l,className:`w-full px-4 py-3 border transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden ${t.visit_time?"border-red-300 focus:border-red-300":"border-graykiSecondary focus:border-golden"}`}),t.visit_time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.visit_time})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans mb-2",children:"Observaciones adicionales"}),e.jsx("textarea",{name:"observations",value:s.observations,onChange:l,rows:3,className:"w-full px-4 py-3 border border-graykiSecondary transition-all duration-200 font-dmsans focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden resize-none",placeholder:"¿Hay algo específico que te gustaría saber sobre la propiedad?"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-softGrey",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-6 py-3 border border-graykiSecondary text-greyki hover:bg-softGrey transition-colors duration-300 font-medium font-dmsans",children:"Cancelar"}),e.jsx(_,{type:"submit",disabled:f,className:`flex-1 py-3 ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Enviando...":"Agendar Visita"})]})]})})]})]})}function B({property:a,auth:N,seo:d}){const[s,m]=c.useState(0),[f,x]=c.useState(!1),[b,u]=c.useState(!1),t=n=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),i=[a.thumbnail_url||"/placeholder.svg",...a.gallery_images||[]],l=()=>{m(n=>(n+1)%i.length)},p=()=>{m(n=>(n-1+i.length)%i.length)};return e.jsxs(e.Fragment,{children:[e.jsx(D,{seo:d}),e.jsxs("div",{className:"min-h-screen bg-whiteki",children:[e.jsx("div",{className:"px-4 py-4 mx-auto max-w-7xl",children:e.jsxs(C,{href:"/inmobiliaria",className:"inline-flex items-center transition-colors duration-200 text-greyki hover:text-golden font-dmsans",children:[e.jsx(F,{className:"w-4 h-4 mr-2 lg:w-5 lg:h-5"}),"Volver a Propiedades"]})}),e.jsx("div",{className:"px-4 py-6 mx-auto max-w-7xl lg:py-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2 lg:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:i[s],alt:a.name,className:"w-full h-64 object-cover border border-softGrey cursor-pointer sm:h-80 lg:h-[500px]",onClick:()=>x(!0)}),e.jsxs("button",{onClick:()=>x(!0),className:"absolute flex items-center gap-2 px-2 py-1 text-xs transition-colors duration-200 top-3 right-3 bg-darki text-whiteki font-dmsans hover:bg-golden lg:top-4 lg:right-4 lg:px-3 lg:py-2 lg:text-sm",children:[e.jsx(V,{className:"w-3 h-3 lg:w-4 lg:h-4"}),"Ver Galería"]}),i.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"absolute p-1 transition-colors duration-200 transform -translate-y-1/2 left-2 top-1/2 bg-darki/80 text-whiteki hover:bg-golden lg:left-4 lg:p-2",children:e.jsx(y,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),e.jsx("button",{onClick:l,className:"absolute p-1 transition-colors duration-200 transform -translate-y-1/2 right-2 top-1/2 bg-darki/80 text-whiteki hover:bg-golden lg:right-4 lg:p-2",children:e.jsx(k,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]}),i.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:i.map((n,g)=>e.jsx("img",{src:n,alt:`${a.name} - ${g+1}`,className:`w-full h-16 object-cover cursor-pointer border-2 transition-all duration-200 sm:h-20 lg:h-20 ${s===g?"border-golden":"border-softGrey hover:border-golden"}`,onClick:()=>m(g)},g))})]}),e.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-golden text-whiteki font-dmsans w-fit",children:a.type}),e.jsx("span",{className:"text-2xl font-bold text-golden font-prata sm:text-3xl",children:t(a.price)})]}),e.jsx("h1",{className:"mb-3 text-2xl font-medium text-darki font-prata sm:text-3xl lg:text-4xl",children:a.name}),e.jsxs("div",{className:"flex items-center mb-4 text-greyki lg:mb-6",children:[e.jsx(I,{className:"w-4 h-4 mr-2 text-golden lg:w-5 lg:h-5"}),e.jsxs("span",{className:"text-sm font-dmsans lg:text-base",children:[a.municipality?.name,", ",a.state?.name||"Colombia"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4 border-y border-softGrey sm:gap-6 sm:py-6",children:[a.size&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx($,{className:"w-5 h-5 text-golden lg:w-6 lg:h-6"})}),e.jsx("div",{className:"text-xl font-bold text-darki font-prata lg:text-2xl",children:a.size}),e.jsx("div",{className:"text-xs text-greyki font-dmsans lg:text-sm",children:"m² construidos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(w,{className:"w-5 h-5 text-golden lg:w-6 lg:h-6"})}),e.jsx("div",{className:"text-xl font-bold text-darki font-prata lg:text-2xl",children:"Disponible"}),e.jsx("div",{className:"text-xs text-greyki font-dmsans lg:text-sm",children:"Para visita"})]})]}),a.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-medium text-darki font-dmsans lg:mb-4 lg:text-xl",children:"Descripción"}),e.jsx("p",{className:"text-sm leading-relaxed text-greyki font-dmsans lg:text-base",children:a.description})]}),e.jsxs("div",{className:"pt-4 space-y-4 border-t border-softGrey lg:pt-6",children:[e.jsx(_,{onClick:()=>u(!0),className:"w-full py-3 text-base lg:py-4 lg:text-lg",children:"Agendar Visita"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsx("button",{className:"px-4 py-2 font-medium transition-all duration-300 border border-golden text-golden hover:bg-golden hover:text-whiteki font-dmsans text-sm lg:px-6 lg:py-3 lg:text-base",children:"Solicitar Información"}),e.jsx("button",{className:"px-4 py-2 font-medium transition-all duration-300 border border-darki text-darki hover:bg-darki hover:text-whiteki font-dmsans text-sm lg:px-6 lg:py-3 lg:text-base",children:"Contactar Asesor"})]})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:e.jsxs("div",{className:"relative flex items-center justify-center w-full h-full p-4",children:[e.jsx("button",{onClick:()=>x(!1),className:"absolute z-10 p-2 transition-colors duration-200 top-4 right-4 bg-darki text-whiteki hover:bg-golden lg:top-6 lg:right-6 lg:p-3",children:e.jsx(S,{className:"w-5 h-5 lg:w-6 lg:h-6"})}),e.jsx("img",{src:i[s],alt:a.name,className:"max-w-full max-h-full object-contain"}),i.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"absolute p-2 transition-colors duration-200 left-4 top-1/2 transform -translate-y-1/2 bg-darki/80 text-whiteki hover:bg-golden lg:left-8 lg:p-3",children:e.jsx(y,{className:"w-6 h-6 lg:w-8 lg:h-8"})}),e.jsx("button",{onClick:l,className:"absolute p-2 transition-colors duration-200 right-4 top-1/2 transform -translate-y-1/2 bg-darki/80 text-whiteki hover:bg-golden lg:right-8 lg:p-3",children:e.jsx(k,{className:"w-6 h-6 lg:w-8 lg:h-8"})})]}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 px-4 py-2 text-sm text-white bg-darki/80 rounded-lg lg:bottom-8 lg:text-base",children:[s+1," / ",i.length]})]})}),b&&e.jsx(L,{property:a,isOpen:b,onClose:()=>u(!1)})]})]})}export{B as default};
