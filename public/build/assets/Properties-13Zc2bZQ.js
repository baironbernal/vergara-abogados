import{c as b,r as i,j as e,M as o,a as d,i as G,L as q}from"./app-BVZ8iRl6.js";import{u as A}from"./useSeoManager-BcdGTP6i.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],O=b("chevron-down",L);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],D=b("chevron-up",$);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],N=b("funnel",E),f=6;function W({states:y,properties:p,municipalities:c,seo:v}){A(v);const[m,n]=i.useState(1),[z,B]=i.useState(null),[R,H]=i.useState(!1),[u,w]=i.useState(!1),[t,h]=i.useState({municipality_id:"",state_id:"",minPrice:"",maxPrice:"",propertyType:""}),k=[...new Set(p.map(s=>s.type))],_=i.useMemo(()=>t.state_id?c.filter(s=>s.state_id===parseInt(t.state_id)):c,[c,t.state_id]),x=i.useMemo(()=>p.filter(s=>{const l=!t.municipality_id||s.municipality_id===parseInt(t.municipality_id),a=!t.state_id||s.state_id===parseInt(t.state_id),T=!t.minPrice||s.price>=Number.parseInt(t.minPrice),F=!t.maxPrice||s.price<=Number.parseInt(t.maxPrice),I=!t.propertyType||s.type===t.propertyType;return l&&a&&T&&F&&I}),[p,t]),g=Math.ceil(x.length/f),j=(m-1)*f,P=x.slice(j,j+f),r=(s,l)=>{h(a=>({...a,[s]:l,...s==="state_id"&&{municipality_id:""}})),n(1)},M=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),S=s=>{const l=y.find(a=>a.id===s);return l?l.name:""},C=s=>{const l=c.find(a=>a.id===s);return l?l.name:""};return e.jsx(e.Fragment,{children:e.jsx("main",{className:"min-h-screen bg-whiteki",children:e.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl lg:py-12",children:[e.jsx(o,{children:e.jsx("div",{className:"mb-6 lg:hidden",children:e.jsxs("button",{onClick:()=>w(!u),className:"flex items-center justify-between w-full p-4 text-left bg-white border shadow-lg border-softGrey",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"w-5 h-5 text-golden"}),e.jsx("span",{className:"font-medium text-darki font-dmsans",children:"Filtros de Búsqueda"})]}),u?e.jsx(D,{className:"w-5 h-5"}):e.jsx(O,{className:"w-5 h-5"})]})})}),e.jsxs("div",{className:"flex flex-col gap-8 lg:flex-row",children:[e.jsx(o,{delay:.1,children:e.jsx("aside",{className:`lg:flex-shrink-0 lg:w-80 ${u?"block":"hidden lg:block"}`,children:e.jsxs("div",{className:"p-6 bg-white border shadow-lg lg:sticky lg:top-4 border-softGrey lg:p-8",children:[e.jsxs("h2",{className:"flex items-center gap-3 mb-6 text-lg font-medium text-darki font-dmsans lg:mb-8 lg:text-xl",children:[e.jsx(N,{className:"w-5 h-5 text-golden lg:w-6 lg:h-6"}),"Filtros de Búsqueda"]}),e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-darki font-dmsans lg:mb-3",children:"Departamento"}),e.jsxs("select",{value:t.state_id,onChange:s=>r("state_id",s.target.value),className:"w-full px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden font-dmsans lg:px-4 lg:py-3",children:[e.jsx("option",{value:"",children:"Todos los departamentos"}),y.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-darki font-dmsans lg:mb-3",children:"Municipio"}),e.jsxs("select",{value:t.municipality_id,onChange:s=>r("municipality_id",s.target.value),disabled:!t.state_id,className:"w-full px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden disabled:bg-softGrey disabled:cursor-not-allowed font-dmsans lg:px-4 lg:py-3",children:[e.jsx("option",{value:"",children:"Todos los municipios"}),_.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans",children:"Rango de Precio"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-3",children:[e.jsx("input",{type:"number",placeholder:"Mínimo",value:t.minPrice,onChange:s=>r("minPrice",s.target.value),className:"px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden font-dmsans lg:px-4 lg:py-3"}),e.jsx("input",{type:"number",placeholder:"Máximo",value:t.maxPrice,onChange:s=>r("maxPrice",s.target.value),className:"px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden font-dmsans lg:px-4 lg:py-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-darki font-dmsans lg:mb-3",children:"Tipo de Propiedad"}),e.jsxs("select",{value:t.propertyType,onChange:s=>r("propertyType",s.target.value),className:"w-full px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden font-dmsans lg:px-4 lg:py-3",children:[e.jsx("option",{value:"",children:"Todos los tipos"}),k.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"pt-4 text-sm border-t border-softGrey text-greyki font-dmsans lg:pt-6",children:["Mostrando ",x.length," propiedades"]}),e.jsx(d,{onClick:()=>{h({municipality_id:"",state_id:"",minPrice:"",maxPrice:"",propertyType:""}),n(1)},className:"w-full",children:"Limpiar Filtros"})]})]})})}),e.jsx(o,{delay:.2,children:e.jsxs("section",{children:[e.jsx("main",{className:"grid w-full grid-cols-1 gap-6 mb-8 sm:grid-cols-2 lg:gap-8 lg:mb-12 xl:grid-cols-3",children:P.map((s,l)=>e.jsx(o,{delay:l*.1,children:e.jsxs("div",{className:"flex flex-col h-full bg-white shadow-lg border border-softGrey overflow-hidden hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.thumbnail?`/storage/${s.thumbnail}`:"/placeholder.svg",alt:s.name,className:"object-cover w-full h-48 sm:h-56"}),e.jsx("span",{className:"absolute px-2 py-1 text-xs font-medium shadow-lg top-3 right-3 bg-golden text-whiteki font-dmsans lg:top-4 lg:right-4 lg:px-3 lg:py-1",children:s.type_spanish}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"flex flex-col flex-grow p-4 lg:p-6",children:[e.jsx("h3",{className:"mb-2 text-lg font-medium leading-tight text-darki font-dmsans lg:mb-3 lg:text-xl",children:s.name}),e.jsx("p",{className:"mb-3 text-xl font-bold text-golden font-prata lg:mb-4 lg:text-2xl",children:M(s.price)}),e.jsxs("div",{className:"flex items-center mb-3 text-greyki lg:mb-4",children:[e.jsx(G,{className:"w-4 h-4 mr-2 text-golden lg:w-5 lg:h-5"}),e.jsxs("span",{className:"text-xs font-dmsans lg:text-sm",children:[C(s.municipality_id),", ",S(s.state_id)]})]}),s.size&&e.jsxs("div",{className:"mb-3 text-xs text-greyki font-dmsans lg:mb-4 lg:text-sm",children:[e.jsx("strong",{children:"Área:"})," ",s.size," m²"]}),s.description&&e.jsx("p",{className:"flex-grow mb-4 text-xs leading-relaxed text-greyki line-clamp-3 font-dmsans lg:mb-6 lg:text-sm",children:s.description})]}),e.jsx("div",{className:"px-4 pb-4 mt-auto lg:px-6 lg:pb-6",children:e.jsx(d,{as:q,href:`/inmobiliaria/${s.id}`,className:"w-full",children:"Ver Detalles"})})]})},s.id))}),e.jsx(o,{delay:.3,children:g>1&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 lg:flex-row lg:gap-3",children:[e.jsx(d,{onClick:()=>n(s=>Math.max(1,s-1)),disabled:m===1,className:"px-4 py-2 text-sm disabled:bg-softGrey disabled:cursor-not-allowed lg:px-5 lg:py-3",children:"Anterior"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1 lg:gap-2",children:Array.from({length:g},(s,l)=>l+1).map(s=>e.jsx("button",{onClick:()=>n(s),className:`min-w-[40px] px-3 py-2 text-sm font-medium font-dmsans transition-all duration-300 lg:min-w-[44px] lg:px-4 lg:py-3 ${m===s?"bg-darki text-whiteki shadow-lg scale-110":"border border-graykiSecondary bg-white hover:bg-darki hover:text-whiteki"}`,children:s},s))}),e.jsx(d,{onClick:()=>n(s=>Math.min(g,s+1)),disabled:m===g,className:"px-4 py-2 text-sm disabled:bg-softGrey disabled:cursor-not-allowed lg:px-5 lg:py-3",children:"Siguiente"})]})}),x.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center w-full px-4 text-center",children:[e.jsx("h3",{className:"mb-4 text-xl font-medium text-darki font-prata lg:text-2xl",children:"No se encontraron propiedades"}),e.jsx("p",{className:"mb-6 text-base text-greyki font-dmsans lg:mb-8 lg:text-lg",children:"No hay propiedades que coincidan con tus criterios de búsqueda"}),e.jsx(d,{onClick:()=>{h({municipality_id:"",state_id:"",minPrice:"",maxPrice:"",propertyType:""}),n(1)},className:"px-6 py-3 m-auto shadow-lg lg:px-8 lg:py-4",children:"Limpiar Todos los Filtros"})]})]})})]})]})})})}export{W as default};
