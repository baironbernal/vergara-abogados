import{c as f,r as i,j as e,a as o,i as I,L as G}from"./app-DerXJYF2.js";import{S as O}from"./SEOHead-Cr-TZVxm.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],A=f("chevron-down",q);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],L=f("chevron-up",E);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],j=f("funnel",D),h=6;function V({states:b,properties:g,municipalities:d,seo:N}){const[c,n]=i.useState(1),[$,z]=i.useState(null),[B,R]=i.useState(!1),[p,v]=i.useState(!1),[t,u]=i.useState({municipality_id:"",state_id:"",minPrice:"",maxPrice:"",propertyType:""}),w=[...new Set(g.map(s=>s.type))],k=i.useMemo(()=>t.state_id?d.filter(s=>s.state_id===parseInt(t.state_id)):d,[d,t.state_id]),m=i.useMemo(()=>g.filter(s=>{const a=!t.municipality_id||s.municipality_id===parseInt(t.municipality_id),l=!t.state_id||s.state_id===parseInt(t.state_id),C=!t.minPrice||s.price>=Number.parseInt(t.minPrice),T=!t.maxPrice||s.price<=Number.parseInt(t.maxPrice),F=!t.propertyType||s.type===t.propertyType;return a&&l&&C&&T&&F}),[g,t]),x=Math.ceil(m.length/h),y=(c-1)*h,_=m.slice(y,y+h),r=(s,a)=>{u(l=>({...l,[s]:a,...s==="state_id"&&{municipality_id:""}})),n(1)},P=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),M=s=>{const a=b.find(l=>l.id===s);return a?a.name:""},S=s=>{const a=d.find(l=>l.id===s);return a?a.name:""};return e.jsxs(e.Fragment,{children:[e.jsx(O,{seo:N}),e.jsx("div",{className:"min-h-screen bg-whiteki",children:e.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl lg:py-12",children:[e.jsx("div",{className:"mb-6 lg:hidden",children:e.jsxs("button",{onClick:()=>v(!p),className:"flex items-center justify-between w-full p-4 text-left bg-white border shadow-lg border-softGrey",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-5 h-5 text-golden"}),e.jsx("span",{className:"font-medium text-darki font-dmsans",children:"Filtros de Búsqueda"})]}),p?e.jsx(L,{className:"w-5 h-5"}):e.jsx(A,{className:"w-5 h-5"})]})}),e.jsxs("div",{className:"flex flex-col gap-8 lg:flex-row",children:[e.jsx("aside",{className:`lg:flex-shrink-0 lg:w-80 ${p?"block":"hidden lg:block"}`,children:e.jsxs("div",{className:"lg:sticky lg:top-4 p-6 bg-white border shadow-lg border-softGrey lg:p-8",children:[e.jsxs("h2",{className:"flex items-center gap-3 mb-6 text-lg font-medium text-darki font-dmsans lg:mb-8 lg:text-xl",children:[e.jsx(j,{className:"w-5 h-5 text-golden lg:w-6 lg:h-6"}),"Filtros de Búsqueda"]}),e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-darki font-dmsans lg:mb-3",children:"Departamento"}),e.jsxs("select",{value:t.state_id,onChange:s=>r("state_id",s.target.value),className:"w-full px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden font-dmsans lg:px-4 lg:py-3",children:[e.jsx("option",{value:"",children:"Todos los departamentos"}),b.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-darki font-dmsans lg:mb-3",children:"Municipio"}),e.jsxs("select",{value:t.municipality_id,onChange:s=>r("municipality_id",s.target.value),disabled:!t.state_id,className:"w-full px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden disabled:bg-softGrey disabled:cursor-not-allowed font-dmsans lg:px-4 lg:py-3",children:[e.jsx("option",{value:"",children:"Todos los municipios"}),k.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-darki font-dmsans",children:"Rango de Precio"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-3",children:[e.jsx("input",{type:"number",placeholder:"Mínimo",value:t.minPrice,onChange:s=>r("minPrice",s.target.value),className:"px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden font-dmsans lg:px-4 lg:py-3"}),e.jsx("input",{type:"number",placeholder:"Máximo",value:t.maxPrice,onChange:s=>r("maxPrice",s.target.value),className:"px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden font-dmsans lg:px-4 lg:py-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-darki font-dmsans lg:mb-3",children:"Tipo de Propiedad"}),e.jsxs("select",{value:t.propertyType,onChange:s=>r("propertyType",s.target.value),className:"w-full px-3 py-2 transition-all duration-200 border border-graykiSecondary focus:outline-none focus:ring-2 focus:ring-golden focus:border-golden font-dmsans lg:px-4 lg:py-3",children:[e.jsx("option",{value:"",children:"Todos los tipos"}),w.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"pt-4 text-sm border-t border-softGrey text-greyki font-dmsans lg:pt-6",children:["Mostrando ",m.length," propiedades"]}),e.jsx(o,{onClick:()=>{u({municipality_id:"",state_id:"",minPrice:"",maxPrice:"",propertyType:""}),n(1)},className:"w-full",children:"Limpiar Filtros"})]})]})}),e.jsxs("main",{className:"flex-1",children:[e.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8 sm:grid-cols-2 lg:gap-8 lg:mb-12 xl:grid-cols-3",children:_.map(s=>e.jsxs("div",{className:"bg-white shadow-lg border border-softGrey overflow-hidden hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.thumbnail_url||"/placeholder.svg",alt:s.name,className:"object-cover w-full h-48 sm:h-56"}),e.jsx("span",{className:"absolute px-2 py-1 text-xs font-medium shadow-lg top-3 right-3 bg-golden text-whiteki font-dmsans lg:top-4 lg:right-4 lg:px-3 lg:py-1",children:s.type}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"p-4 lg:p-6",children:[e.jsx("h3",{className:"mb-2 text-lg font-medium leading-tight text-darki font-dmsans lg:mb-3 lg:text-xl",children:s.name}),e.jsx("p",{className:"mb-3 text-xl font-bold text-golden font-prata lg:mb-4 lg:text-2xl",children:P(s.price)}),e.jsxs("div",{className:"flex items-center mb-3 text-greyki lg:mb-4",children:[e.jsx(I,{className:"w-4 h-4 mr-2 text-golden lg:w-5 lg:h-5"}),e.jsxs("span",{className:"text-xs font-dmsans lg:text-sm",children:[S(s.municipality_id),", ",M(s.state_id)]})]}),s.size&&e.jsxs("div",{className:"mb-3 text-xs text-greyki font-dmsans lg:mb-4 lg:text-sm",children:[e.jsx("strong",{children:"Área:"})," ",s.size," m²"]}),s.description&&e.jsx("p",{className:"mb-4 text-xs leading-relaxed text-greyki line-clamp-3 font-dmsans lg:mb-6 lg:text-sm",children:s.description})]}),e.jsx("div",{className:"px-4 pb-4 lg:px-6 lg:pb-6",children:e.jsx(o,{as:G,href:`/inmobiliaria/${s.id}`,className:"w-full",children:"Ver Detalles"})})]},s.id))}),x>1&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 lg:flex-row lg:gap-3",children:[e.jsx(o,{onClick:()=>n(s=>Math.max(1,s-1)),disabled:c===1,className:"px-4 py-2 text-sm disabled:bg-softGrey disabled:cursor-not-allowed lg:px-5 lg:py-3",children:"Anterior"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1 lg:gap-2",children:Array.from({length:x},(s,a)=>a+1).map(s=>e.jsx("button",{onClick:()=>n(s),className:`min-w-[40px] px-3 py-2 text-sm font-medium font-dmsans transition-all duration-300 lg:min-w-[44px] lg:px-4 lg:py-3 ${c===s?"bg-golden text-whiteki shadow-lg scale-110":"border border-graykiSecondary bg-white hover:bg-darki hover:text-whiteki"}`,children:s},s))}),e.jsx(o,{onClick:()=>n(s=>Math.min(x,s+1)),disabled:c===x,className:"px-4 py-2 text-sm disabled:bg-softGrey disabled:cursor-not-allowed lg:px-5 lg:py-3",children:"Siguiente"})]}),m.length===0&&e.jsx("div",{className:"py-12 text-center lg:py-16",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("h3",{className:"mb-4 text-xl font-medium text-darki font-prata lg:text-2xl",children:"No se encontraron propiedades"}),e.jsx("p",{className:"mb-6 text-base text-greyki font-dmsans lg:mb-8 lg:text-lg",children:"No hay propiedades que coincidan con tus criterios de búsqueda"}),e.jsx(o,{onClick:()=>{u({municipality_id:"",state_id:"",minPrice:"",maxPrice:"",propertyType:""}),n(1)},className:"px-6 py-3 shadow-lg lg:px-8 lg:py-4",children:"Limpiar Todos los Filtros"})]})})]})]})]})})]})}export{V as default};
